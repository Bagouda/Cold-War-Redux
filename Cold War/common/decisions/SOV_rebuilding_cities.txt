@HERO_CITY_STABILITY = 0.01
@RECOSTRUCTION_MANPOWER = 100
@RECOSTRUCTION_INFRA = 1
cw_rebuilding_russia = {
	cw_reconstruction_rebuild_state_housing = {
		
		icon = GFX_house_decision_icon
		on_map_mode = map_only
		
		allowed = {}
		
		state_target = yes
		target_array = owned_states
		target_trigger = {
		
			FROM = {
			

				is_on_continent = europe
				infrastructure > 2
				OR = {
					AND = {
						is_core_of = UKR
						ROOT = { has_country_flag = sov_rebuilding_ukranian_cities }
					}
					AND = {
						is_core_of = BLR
						ROOT = { has_country_flag = sov_rebuilding_belarusian_cities }
					}
					
					AND = {
						is_claimed_by = RUS
						SOV = { has_country_flag = sov_rebuilding_russian_cities }
					}
					
					AND = {
						OR = {
							is_core_of = LET
							is_core_of = LAT
							is_core_of = EST
						}
						ROOT = { has_country_flag = sov_rebuilding_baltic_cities }
	
					}
				}
								
			}
		}

		available = {
			ROOT = { num_of_civilian_factories_available_for_projects > 4 }
		}

		visible = {
			ROOT = { has_country_flag = reconstruction_effort_initiated }
		}

		cost = 0
		days_re_enable = 10		
		days_remove = var:ROOT.sov_reconstruction_cost_time

		modifier = {
			civilian_factory_use = 3
		}
		remove_effect = {
			FROM = { add_extra_state_shared_building_slots = 1 }
			if = {
				limit = {
					FROM = { is_core_of = RUS }
				}
				add_to_variable = { ROOT.rus_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = UKR
						}
					}
				}
				add_to_variable = { ROOT.ukr_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = BLR
						}
					}
				}
				add_to_variable = { ROOT.blr_reconstruction_progress = 10 }
			}
			
			
			if = {
				limit = { FROM = { OR = { is_core_of =  LAT  is_core_of =  LET   is_core_of =  EST} } }
				add_to_variable = { ROOT.blt_reconstruction_progress = 10 }
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	cw_reconstruction_repair_infrastructure = {
		
		icon = GFX_decision_generic_construction
		on_map_mode = map_only
		
		allowed = {}

		state_target = yes
		target_array = owned_states
		target_trigger = {
			FROM = {
			

				is_on_continent = europe
				state_strategic_value > 15
				infrastructure < 5
				OR = {
					AND = {
						is_core_of = UKR
						ROOT = { has_country_flag = sov_rebuilding_ukranian_cities }
					}
					AND = {
						is_core_of = BLR
						ROOT = { has_country_flag = sov_rebuilding_belarusian_cities }
					}
					
					AND = {
						is_claimed_by = RUS
						SOV = { has_country_flag = sov_rebuilding_russian_cities }
					}
					
					AND = {
						OR = {
							is_core_of = LET
							is_core_of = LAT
							is_core_of = EST
						}
						ROOT = { has_country_flag = sov_rebuilding_baltic_cities }
	
					}
				}
			
			}
		}

		available = {
			FROM = { infrastructure < 5 }
			ROOT = { num_of_civilian_factories_available_for_projects > 4 }
		}

		visible = {
			ROOT = { has_country_flag = reconstruction_effort_initiated }
		}
		
		cost = 0
		days_re_enable = 10
		days_remove = var:ROOT.sov_reconstruction_cost_time

		modifier = {
			civilian_factory_use = 3
		}
		remove_effect = {
			FROM = { add_building_construction = { type = infrastructure level = @RECOSTRUCTION_INFRA instant_build = yes } }
			if = {
				limit = {
					FROM = { is_claimed_by = RUS }
				}
				add_to_variable = { ROOT.rus_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = UKR
							is_claimed_by = UKR
						}
					}
				}
				add_to_variable = { ROOT.ukr_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = BLR
							is_claimed_by = BLR 
						}
					}
				}
				add_to_variable = { ROOT.blr_reconstruction_progress = 10 }
			}

			if = {
				limit = { FROM = { OR = { is_core_of =  LAT  is_core_of =  LET   is_core_of =  EST} } }
				add_to_variable = { ROOT.blt_reconstruction_progress = 10 }
			}			
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	cw_reconstruction_repair_railways = {
		
		icon = GFX_infra_decision_icon
		on_map_mode = map_only
		
		allowed = {}

		state_target = yes
		target_array = owned_states
		target_trigger = {
			FROM = {
				is_on_continent = europe
				state_strategic_value > 20
				is_capital = no
				OR = {
					AND = {
						is_core_of = UKR
						ROOT = { has_country_flag = sov_rebuilding_ukranian_cities }
					}
					AND = {
						is_core_of = BLR
						ROOT = { has_country_flag = sov_rebuilding_belarusian_cities }
					}
					
					AND = {
						is_claimed_by = RUS
						SOV = { has_country_flag = sov_rebuilding_russian_cities }
					}
					
					AND = {
						OR = {
							is_core_of = LET
							is_core_of = LAT
							is_core_of = EST
						}
						ROOT = { has_country_flag = sov_rebuilding_baltic_cities }
	
					}
				}			
			}
		}

		available = {
			ROOT = { num_of_civilian_factories_available_for_projects > 4 }
			can_build_railway = { start_state = var:capital target_state = FROM }
		}

		visible = {
			ROOT = { has_country_flag = reconstruction_effort_initiated }
		}
		
		cost = 0
		days_re_enable = 10
		fire_only_once = yes
		days_remove = var:ROOT.sov_reconstruction_cost_time

		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			build_railway = {
			  fallback = yes
			  start_state = var:capital
			  target_state = FROM
			}
			if = {
				limit = {
					FROM = { is_claimed_by = RUS }
				}
				add_to_variable = { ROOT.rus_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = UKR
							is_claimed_by = UKR
						}
					}
				}
				add_to_variable = { ROOT.ukr_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = BLR
							is_claimed_by = BLR 
						}
					}
				}
				add_to_variable = { ROOT.blr_reconstruction_progress = 10 }
			}
			
			
			if = {
				limit = { FROM = { OR = { is_core_of =  LAT  is_core_of =  LET   is_core_of =  EST} } }
				add_to_variable = { ROOT.blt_reconstruction_progress = 10 }
			}

			
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	cw_reconstruction_reconstruct_civ_industry = {
		
		icon = GFX_decision_generic_factory
		on_map_mode = map_only
		
		allowed = {}

		state_target = yes
		target_array = owned_states
		target_trigger = {
			FROM = {
				is_on_continent = europe
				state_strategic_value > 40
				state_population_k > 1000
				OR = {
					AND = {
						is_core_of = UKR
						ROOT = { has_country_flag = sov_rebuilding_ukranian_cities }
					}
					AND = {
						is_core_of = BLR
						ROOT = { has_country_flag = sov_rebuilding_belarusian_cities }
					}
					
					AND = {
						is_claimed_by = RUS
						SOV = { has_country_flag = sov_rebuilding_russian_cities }
					}
					
					AND = {
						OR = {
							is_core_of = LET
							is_core_of = LAT
							is_core_of = EST
						}
						ROOT = { has_country_flag = sov_rebuilding_baltic_cities }
	
					}
				}				
			}
		}

		available = {
			infrastructure > 3
		}

		visible = {
			ROOT = { has_country_flag = reconstruction_effort_initiated }
		}
		
		cost = 0
		days_remove = 90
		fire_only_once = yes

		modifier = {
			consumer_goods_factor = 0.01
		}
		remove_effect = {
			FROM = { add_building_construction = { type = industrial_complex level = 2 instant_build = yes } }
			if = {
				limit = {
					FROM = { is_claimed_by = RUS }
				}
				add_to_variable = { ROOT.rus_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = UKR
							is_claimed_by = UKR
						}
					}
				}
				add_to_variable = { ROOT.ukr_reconstruction_progress = 5 }
			}
			if = {
				limit = {
					FROM = { 
						OR = {
							is_core_of = BLR
							is_claimed_by = BLR 
						}
					}
				}
				add_to_variable = { ROOT.blr_reconstruction_progress = 10 }
			}
			
			if = {
				limit = { FROM = { OR = { is_core_of =  LAT  is_core_of =  LET   is_core_of =  EST} } }
				add_to_variable = { ROOT.blt_reconstruction_progress = 10 }
			}

			
		}
		ai_will_do = {
			factor = 1
		}
	}	
	cw_reconstruction_award_hero_city = {
		
		icon = GFX_soviet_medal_decision_icon
		on_map_mode = map_only
		
		allowed = {
			tag = SOV
		}

		state_target = yes
		target_array = owned_states
		target_trigger = {
			FROM = {
				is_on_continent = europe
				state_strategic_value > 50
				OR = {
					AND = {
						is_core_of = UKR
						ROOT = { has_country_flag = sov_rebuilding_ukranian_cities }
					}
					AND = {
						is_core_of = BLR
						ROOT = { has_country_flag = sov_rebuilding_belarusian_cities }
					}
					
					AND = {
						is_claimed_by = RUS
						SOV = { has_country_flag = sov_rebuilding_russian_cities }
					}
					
					AND = {
						OR = {
							is_core_of = LET
							is_core_of = LAT
							is_core_of = EST
						}
						ROOT = { has_country_flag = sov_rebuilding_baltic_cities }
	
					}
				}
			}
		}

		available = {
		}

		visible = {
			ROOT = { has_country_flag = reconstruction_effort_initiated }
		}

		cost = 200
		fire_only_once = yes	
		days_remove = 120

		modifier = {
			stability_weekly = @HERO_CITY_STABILITY
		}
		ai_will_do = {
			factor = 1
		}
	}	
}