
#name is also used for loc
#modifier_id = {
#	#description to use in tooltip
#	tooltip = "bla_bla"
#	
#	#gfx entry & frame for law entry icon. both frame and gfx name can be ommited
#	#gfx entry can be omitted, in that case it will default to GFX_occupation_modifier_strip
#	icon = "GFX_bla_bla:1"
#	#small icon will be used for progress bars (GFX_occupation_modifier_small_strip is default gfx)
#	icon_small = "GFX_bla_bla_small:1"
#	
#	type = state_resistance_modifier
#	#type = core_resistance_modifier
#	#type = state_compliance_modifier
#	#type = core_compliancemodifier
#	
#	#for state modifiers, the scope will be the state, FROM/root will be the occuppier and from from will be the occuppied country
#	#for core modifiers, the scope/root will be the occuppier and from will be the occuppied country
#	
#	#percentage threshold to enable
#	threshold = 35
#	
#	#margin to disable the modifier back. it will be disabled if current value < threshold - margin.
#	margin = 2
#	
#	#if visible is false, the modifier will not show up anywhere
#	visible = {
#		
#	}
#	
#	#if enabled is false, the modifier won't be enabled even if it passes threshold (and will be disabled if it was enabled before)
#	enabled = {
#	
#	}
#	
#	#the effect will be called when modifier is enabled
#	on_enable = {
#	
#	}
#	
#	#the effect will be called when modifier is disabled
#	on_disable = {
#	
#	}
#	
#	#will be added to state if modifier is enabled
#	state_modifier = {
#	
#	}
#}


resistance_25 = {
	type = state_resistance_modifier
	icon = "GFX_occupation_resistance_modifier_strip:1"
	small_icon = "GFX_occupation_resistance_modifier_small_strip:1"
	threshold = 25
	margin = 2
	state_modifier = {
		resistance_garrison_penetration_chance = 0.5
	}
	on_enable = {
		if = {
			limit = {
				FROM.FROM = { exists = no }
				OR = {
					is_on_continent = africa
					region = 210
					region = 211
				}
				OWNER = {
					cw_holding_referendum = no 
					NOT = { has_country_flag = has_occupation_event_active }
				}
				FROM.FROM = { NOT = { tag = ROOT } }
			}
			OWNER = {
				set_variable = { occupier_country = OWNER.id }
				set_variable = { occupied_country = FROM.FROM.id }
				set_variable = { occupied_state = PREV.id }
				country_event = cw_occupation_events.1
			}
			if = {
				limit = {
					FROM.FROM = { exists = yes }
				}
				OWNER = {
					set_country_flag = territory_demanding_outside_union
				}
				else = {
					OWNER = {
						set_country_flag = territory_demanding_autonomy
					}
				}
			}
		}		
	}
}
resistance_50 = {
	type = state_resistance_modifier
	icon = "GFX_occupation_resistance_modifier_strip:2"
	small_icon = "GFX_occupation_resistance_modifier_small_strip:2"
	threshold = 50
	margin = 2
	state_modifier = {
		resistance_damage_to_garrison = 1
	}
	on_enable = {
		##custom_effect_tooltip = resistance_90_effect_tooltip
		if = {
			limit = {
				FROM.FROM = { exists = no }
				is_on_continent = africa
				OWNER = {
					cw_holding_referendum = no 
					NOT = { has_country_flag = has_occupation_event_active }
				}
				NOT = { OWNER = { has_country_flag = recent_independence } }
				FROM.FROM = { NOT = { tag = ROOT } }
			}
			OWNER = {
				set_variable = { occupier_country = OWNER.id }
				set_variable = { occupied_country = FROM.FROM.id }
				set_variable = { occupied_state = PREV.id }
				country_event = cw_occupation_events.2
			}
			if = {
				limit = {
					FROM.FROM = { exists = yes }
				}
				OWNER = {
					set_country_flag = territory_demanding_outside_annexation
				}
				else = {
					OWNER = {
						set_country_flag = territory_demanding_independence
					}
				}
			}
		}
	}	
}

resistance_75 = {
	type = state_resistance_modifier
	icon = "GFX_occupation_resistance_modifier_strip:3"
	small_icon = "GFX_occupation_resistance_modifier_small_strip:3"
	threshold = 75
	margin = 10
	state_modifier = {
		army_speed_factor_for_controller = -0.5
		local_supplies_for_controller = -0.5
		attrition_for_controller = 0.3
		disable_strategic_redeployment_for_controller = 1
	}
	on_enable = {
		##custom_effect_tooltip = resistance_90_effect_tooltip
		if = {
			limit = {
				FROM.FROM = { exists = no }
				is_on_continent = africa
				has_global_flag = decolonization_started
				unsc_in_session = no
				unsc_implementing_resolution = no
			}
			UNN = { FROM.FROM = { cw_unsc_resolution_foreign_withdrawal = yes } }
			hidden_effect = {
				every_country = {
					limit = {
						is_unsc_member = yes
						OR = {
							has_government = communism
							has_government = communism_totalitarian
							has_government = unaligned_right
							has_government = neutrality
						}
					}
					cw_unsc_set_like_resolution = yes
				}
				set_global_flag = colonial_withdrawal_demand
			}
		}		
	}	
}

resistance_90 = {
	type = core_resistance_modifier
	icon = "GFX_occupation_resistance_modifier_strip:4"
	small_icon = "GFX_occupation_resistance_modifier_small_strip:4"
	threshold = 90
	margin = 2
	
	alert_level = high
	alert_margin = 20
	
	state_modifier = { 
		local_factories = -0.03
	}
	
	on_enable = {
		custom_effect_tooltip = resistance_90_effect_tooltip
		if = {
			limit = {
				FROM.FROM = {
					exists = no
					capital_scope = { is_on_continent = africa } 
				}
			}
			ROOT = {
				set_variable = { occupier_country = OWNER.id }
				set_variable = { occupied_country = FROM.FROM.id }
				set_variable = { occupied_state = PREV.id }
				set_country_flag = { flag = has_occupation_event_active value = 1 days = 5 }
			}
			country_event = { id = cw_occupation_events.3 hours = 5 }
		}
	}
}
